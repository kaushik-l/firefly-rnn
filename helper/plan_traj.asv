%%
function [v,w,t_d] = plan_traj(x,y,v_max,dt,rampduration)

R = (x^2 + y^2)/(2*abs(x)); % radius of circular trajectory
r = sqrt(x^2 + y^2);
theta = atan2(abs(y),abs(x)); % target angle
phi = atan2(r*sin(theta), R - r*cos(theta)); % angle subtended by the arc (start -> target)
d = R*phi; % trajectory length
t_d = d/v_max; % movement duration

v = v_max*ones(round(t_d/dt),1); % linear velocity
v(1:rampdura)
w = sign(y)*(v/R); % angular velocity

end